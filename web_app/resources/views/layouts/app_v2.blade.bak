<!doctype html>
<html lang="{{ str_replace('_', '-', app()->getLocale()) }}">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="csrf-token" content="{{ csrf_token() }}">
    <title>{{ config('app.name', 'GreenTech') }}</title>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="{{ asset('public/css/layout.css') }}" />
    <link rel="stylesheet" href="{{ asset('public/vendor/font-awesome/css/all.min.css') }}">
    <!--link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" /-->
    <!-- JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
    @yield('styles')
</head>

<body>
    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Sidebar -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h5>
                <i class="fas fa-microchip"></i> {{ config('app.name', 'GreenTech') }}
                <button class="sidebar-close" id="sidebarClose">
                    <i class="fas fa-times"></i>
                </button>
            </h5>
        </div>

        <ul class="sidebar-nav">
            <!-- Account Section -->
            @guest
            <li class="nav-item">
                <a class="nav-link" href="{{ route('login') }}">
                    <i class="fas fa-sign-in-alt"></i> Login
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{{ route('register') }}">
                    <i class="fas fa-user-plus"></i> Register
                </a>
            </li>
            @else
            <li class="nav-item">
                <a class="nav-link" href="#">
                    <i class="fas fa-user-circle"></i> {{ Auth::user()->name }}
                    <span class="badge-role"> {{ Auth::user()->role->name ?? '' }}</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{{ route('logout') }}" onclick="event.preventDefault();document.getElementById('logout-form-sidebar').submit();">
                    <i class="fas fa-sign-out-alt"></i> Log Out
                </a>
                <form id="logout-form-sidebar" action="{{ route('logout') }}" method="post" class="d-none">
                    @csrf
                </form>
            </li>
            @endguest

            <!-- Main Navigation -->
            <li>
                <h6 class="sidebar-section-title">Main Navigation</h6>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{{ route('administrator.home') }}">
                    <i class="fas fa-home"></i> Home
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">
                    <i class="fas fa-store"></i> Shop
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">
                    <i class="fas fa-info-circle"></i> About Us
                </a>
            </li>

            <!-- Admin Management Section -->
            <li>
                <h6 class="sidebar-section-title">Administration</h6>
            </li>
            <li class="nav-item">
                <button class="sidebar-dropdown collapsed" data-bs-target="#userManagement">
                    <i class="fas fa-users-cog"></i> User & Permissions
                    <i class="fas fa-chevron-down dropdown-icon"></i>
                </button>

                <div class="collapse sidebar-submenu" id="userManagement">
                    <a class="nav-link" href="{{ route('administrator.users') }}">
                        <i class="fas fa-users"></i> User Management
                    </a>

                    <a class="nav-link" href="{{ route('administrator.roles') }}">
                        <i class="fas fa-user-shield"></i> Roles Management
                    </a>
                </div>
            </li>

            <li class="nav-item">
                <button class="sidebar-dropdown collapsed" data-bs-target="#categoryManagement">
                    <i class="fas fa-sitemap"></i> Categories and Manufacturers
                    <i class="fas fa-chevron-down dropdown-icon"></i>
                </button>
                <div class="collapse sidebar-submenu" id="categoryManagement">
                    <a class="nav-link" href="{{ route('administrator.categories') }}">
                        <i class="fas fa-list"></i> Categories
                    </a>
                    <a class="nav-link" href="{{ route('administrator.manufacturers') }}">
                        <i class="fas fa-copyright"></i> Manufacturers
                    </a>
                </div>
            </li>

            <!-- Product Management -->
            <li>
                <h6 class="sidebar-section-title">Product Management</h6>
            </li>
            <li class="nav-item">
                <button class="sidebar-dropdown collapsed" data-bs-target="#productManagement">
                    <i class="fas fa-box"></i> Products
                    <i class="fas fa-chevron-down dropdown-icon"></i>
                </button>
                <div class="collapse sidebar-submenu" id="productManagement">
                    <a class="nav-link" href="{{ route('administrator.products') }}">
                        <i class="fas fa-cube"></i> All Products
                    </a>
                </div>
            </li>

            <!-- Order Management -->
            <li>
                <h6 class="sidebar-section-title">Order Management</h6>
            </li>
            <li class="nav-item">
                <button class="sidebar-dropdown collapsed" data-bs-target="#orderManagement">
                    <i class="fas fa-file-invoice"></i> Orders
                    <i class="fas fa-chevron-down dropdown-icon"></i>
                </button>
                <div class="collapse sidebar-submenu" id="orderManagement">
                    <a class="nav-link" href="{{ route('administrator.orders') }}">
                        <i class="fas fa-shopping-cart"></i> All Orders
                    </a>
                    <a class="nav-link" href="{{ route('administrator.order_statuses') }}">
                        <i class="fas fa-list-check"></i> Order Status
                    </a>
                </div>
            </li>

            <!-- IoT Management -->
            <li>
                <h6 class="sidebar-section-title">IoT Management</h6>
            </li>
            <li class="nav-item">
                <button class="sidebar-dropdown collapsed" data-bs-target="#iotManagement">
                    <i class="fas fa-microchip"></i> IoT Devices
                    <i class="fas fa-chevron-down dropdown-icon"></i>
                </button>
                <div class="collapse sidebar-submenu" id="iotManagement">
                    <a class="nav-link" href="{{ route('administrator.iot_devices') }}">
                        <i class="fas fa-network-wired"></i> Device List
                    </a>
                    <!--a class="nav-link" href="{{ route('administrator.device_metrics') }}">
                        <i class="fas fa-chart-line"></i> Device Metrics
                    </a>
                    <a class="nav-link" href="{{ route('administrator.alert_thresholds') }}">
                        <i class="fas fa-bell"></i> Alert Thresholds
                    </a-->
                </div>
            </li>

            <!-- Settings Section -->
            <li>
                <h6 class="sidebar-section-title">Settings</h6>
            </li>
            <li class="nav-item">
                <button class="theme-toggle" onclick="toggleTheme()">
                    <i class="fas fa-adjust"></i> <span id="themeText">Dark Mode</span>
                </button>
            </li>
            <li class="nav-item">
                <button class="lang-toggle" onclick="toggleLanguage()">
                    <i class="fas fa-language"></i> <span id="langText">Vietnamese</span>
                </button>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">
                    <i class="fas fa-question-circle"></i> Help Center
                </a>
            </li>
        </ul>
    </nav>

    <form id="logout-form" action="{{ route('logout') }}" method="POST" class="d-none">
        @csrf
    </form>

    <div class="container-fluid">
        <!-- Horizontal Navbar -->
        <nav class="navbar navbar-expand-lg navbar-custom">
            <div class="container-fluid">
                <!-- Sidebar Toggle Button -->
                <button class="sidebar-toggle" id="sidebarToggle">
                    <i class="fas fa-bars"></i>
                </button>

                <!-- Brand -->
                <a class="navbar-brand" href="{{ route('administrator.home') }}">
                    <i class="fas fa-microchip"></i>
                    <span class="brand-text">{{ config('app.name', 'GreenTech') }}</span>
                </a>

                <!-- Mobile Toggle -->
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMain">
                    <i class="fas fa-bars"></i>
                </button>

                <div class="collapse navbar-collapse" id="navbarMain">
                    <!-- Left Navigation -->
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="{{ route('administrator.home') }}">
                                <i class="fas fa-home"></i> Home
                            </a>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link btn" onclick="toggleTheme()">
                                <i class="fas fa-adjust"></i> <span id="themeTextNav">Dark</span>
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link btn" onclick="toggleLanguage()">
                                <i class="fas fa-language"></i> <span id="langTextNav">VI</span>
                            </button>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <i class="fas fa-info-circle"></i>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <i class="fas fa-question-circle"></i>
                            </a>
                        </li>
                    </ul>

                    <!-- Search Form -->
                    <form class="d-flex search-form mx-3">
                        <input class="form-control" type="search" placeholder="Search..." aria-label="Search">
                        <button class="btn" type="submit">
                            <i class="fas fa-search"></i>
                        </button>
                    </form>

                    <!-- Right Navigation -->
                    <ul class="navbar-nav ms-auto">
                        @guest
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#user" data-bs-toggle="dropdown">
                                <i class="fas fa-user"></i> Account
                            </a>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li><a class="dropdown-item" href="{{ route('login') }}">
                                        <i class="fas fa-sign-in-alt"></i> Log In
                                    </a></li>
                                <li><a class="dropdown-item" href="{{ route('register') }}">
                                        <i class="fas fa-user-plus"></i> Register
                                    </a></li>
                            </ul>
                        </li>
                        @else
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">
                                <i class="fas fa-user-circle"></i> {{ Auth::user()->name }}
                            </a>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li><a class="dropdown-item" href="#">
                                        <i class="fas fa-user"></i> Profile
                                    </a></li>
                                <li><a class="dropdown-item" href="#">
                                        <i class="fas fa-cog"></i> Settings
                                    </a></li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li><a class="dropdown-item" href="{{ route('logout') }}"
                                        onclick="event.preventDefault();document.getElementById('logout-form').submit();">
                                        <i class="fas fa-sign-out-alt"></i> Log Out
                                    </a></li>
                            </ul>
                        </li>
                        @endguest
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content pt-3" id="mainContent">
            @yield('content')
        </main>

        <!-- Footer -->
        <footer>
            <div class="container py-5">
                <!-- Service Introduction Section -->
                <div class="footer-service-intro p-4 mb-5 rounded">
                    <h2 class="mb-4">
                        <i class="fas fa-seedling me-2"></i>{{ config('app.name', 'GreenTech') }}: Smart IoT Solutions for Agriculture
                    </h2>
                    <p class="lead">
                        {{ config('app.name', 'GreenTech') }} is an integrated IoT ecosystem for modern agriculture.
                        Our platform features key functionalities like
                        <span class="highlight">Smart Sensors</span>,
                        <span class="highlight">Real-time Monitoring</span>,
                        <span class="highlight">Automated Irrigation</span>,
                        and <span class="highlight">Data Analytics</span>.
                        With comprehensive device management and alert systems, we optimize crop yield and resource efficiency for sustainable farming.
                    </p>
                </div>

                <!-- Main Information Sections -->
                <div class="row g-4 mb-5">
                    <!-- Column 1: Customer Service -->
                    <div class="col-lg-3 col-md-6">
                        <div class="footer-column p-4 h-100 rounded">
                            <h3 class="mb-4">
                                <i class="fas fa-headset me-2"></i>Customer Service
                            </h3>
                            <div class="d-flex flex-column gap-1">
                                <a href="#" class="footer-link-item">
                                    <i class="fas fa-question-circle me-2"></i>Help Center
                                </a>
                                <a href="#" class="footer-link-item">
                                    <i class="fas fa-blog me-2"></i>GreenTech Blog
                                </a>
                                <a href="#" class="footer-link-item">
                                    <i class="fas fa-shopping-cart me-2"></i>How To Buy
                                </a>
                                <a href="#" class="footer-link-item">
                                    <i class="fas fa-microchip me-2"></i>IoT Setup Guide
                                </a>
                                <a href="#" class="footer-link-item">
                                    <i class="fas fa-credit-card me-2"></i>Payment
                                </a>
                                <a href="#" class="footer-link-item">
                                    <i class="fas fa-shipping-fast me-2"></i>Shipping
                                </a>
                                <a href="#" class="footer-link-item">
                                    <i class="fas fa-undo me-2"></i>Return & Refund
                                </a>
                                <a href="#" class="footer-link-item">
                                    <i class="fas fa-phone me-2"></i>Contact Us
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Column 2: About & Social -->
                    <div class="col-lg-3 col-md-6">
                        <div class="footer-column p-4 h-100 rounded">
                            <h3 class="mb-4">
                                <i class="fas fa-info-circle me-2"></i>About {{ config('app.name', 'GreenTech') }}
                            </h3>
                            <div class="d-flex flex-column gap-1 mb-4">
                                <a href="#" class="footer-link-item">
                                    <i class="fas fa-building me-2"></i>About Us
                                </a>
                                <a href="#" class="footer-link-item">
                                    <i class="fas fa-users me-2"></i>Careers
                                </a>
                                <a href="#" class="footer-link-item">
                                    <i class="fas fa-file-contract me-2"></i>Company Policy
                                </a>
                                <a href="#" class="footer-link-item">
                                    <i class="fas fa-newspaper me-2"></i>Media
                                </a>
                            </div>

                            <h3 class="mb-4">
                                <i class="fas fa-share-alt me-2"></i>Follow Us
                            </h3>
                            <div class="d-flex flex-column gap-1">
                                <a href="#" class="footer-link-item">
                                    <i class="fab fa-facebook me-2"></i>Facebook
                                </a>
                                <a href="#" class="footer-link-item">
                                    <i class="fab fa-linkedin me-2"></i>LinkedIn
                                </a>
                                <a href="#" class="footer-link-item">
                                    <i class="fab fa-github me-2"></i>Github
                                </a>
                                <a href="#" class="footer-link-item">
                                    <i class="fab fa-instagram me-2"></i>Instagram
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Column 3: Payment & Logistics -->
                    <div class="col-lg-3 col-md-6">
                        <div class="footer-column p-4 h-100 rounded">
                            <h3 class="mb-4">
                                <i class="fas fa-credit-card me-2"></i>Payment
                            </h3>
                            <div class="d-flex flex-column gap-1 mb-4">
                                <div class="footer-info-item">
                                    <i class="fab fa-cc-visa me-2"></i>VISA
                                </div>
                                <div class="footer-info-item">
                                    <i class="fas fa-mobile-alt me-2"></i>MoMo
                                </div>
                                <div class="footer-info-item">
                                    <i class="fas fa-mobile-alt me-2"></i>ZaloPay
                                </div>
                                <div class="footer-info-item">
                                    <i class="fas fa-credit-card me-2"></i>Credit Card
                                </div>
                            </div>

                            <h3 class="mb-4">
                                <i class="fas fa-truck me-2"></i>Logistics
                            </h3>
                            <div class="d-flex flex-column gap-1">
                                <div class="footer-info-item">
                                    <i class="fas fa-shipping-fast me-2"></i>SPX
                                </div>
                                <div class="footer-info-item">
                                    <i class="fas fa-shipping-fast me-2"></i>Viettel Post
                                </div>
                                <div class="footer-info-item">
                                    <i class="fas fa-shipping-fast me-2"></i>J&T Express
                                </div>
                                <div class="footer-info-item">
                                    <i class="fas fa-shipping-fast me-2"></i>Grab Express
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Column 4: Download App -->
                    <div class="col-lg-3 col-md-6">
                        <div class="footer-column footer-app-section p-4 h-100 rounded">
                            <h3 class="mb-4">
                                <i class="fas fa-mobile-alt me-2"></i>Download Our App
                            </h3>
                            <div class="mb-4">
                                <div class="footer-qr-placeholder">
                                    <div>
                                        <i class="fas fa-qrcode fa-2x mb-2"></i>
                                        <div class="small">QR Code</div>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex flex-column align-items-center">
                                <a href="#" class="footer-app-button">
                                    <i class="fab fa-apple me-2"></i>App Store
                                </a>
                                <a href="#" class="footer-app-button">
                                    <i class="fab fa-google-play me-2"></i>Google Play
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Copyright and Company Info Section -->
                <div class="footer-bottom pt-4 text-center">
                    <div class="footer-bottom-links mb-3">
                        <a href="#" class="me-3">Privacy Policy</a>
                        <a href="#" class="me-3">Terms of Service</a>
                        <a href="#" class="me-3">Shipping Policy</a>
                        <a href="#" class="me-3">Return & Refund Policy</a>
                    </div>

                    <div class="footer-company-info">
                        <p class="mb-2">&copy; {{ date('Y') }} {{ config('app.name', 'GreenTech') }} by Huynh Quoc Huy. All rights reserved.</p>
                        <p class="mb-2">{{ config('app.name', 'GreenTech') }} Technology Company Limited</p>
                        <p class="mb-0">
                            Address: <span class="footer-highlight">Long Xuyen City, An Giang, VietNam</span> |
                            Tax Code: <span class="footer-highlight">8825719470</span> |
                            Email: <span class="footer-highlight">greentech@gmail.com</span>
                        </p>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const sidebar = document.getElementById('sidebar');
            const sidebarToggle = document.getElementById('sidebarToggle');
            const sidebarClose = document.getElementById('sidebarClose');
            const sidebarOverlay = document.getElementById('sidebarOverlay');
            const mainContent = document.getElementById('mainContent');

            function openSidebar() {
                sidebar.classList.add('show');
                sidebarOverlay.classList.add('show');
                if (window.innerWidth > 768) {
                    mainContent.classList.add('sidebar-open');
                }
            }

            function closeSidebar() {
                sidebar.classList.remove('show');
                sidebarOverlay.classList.remove('show');
                mainContent.classList.remove('sidebar-open');
            }

            sidebarToggle.addEventListener('click', openSidebar);
            sidebarClose.addEventListener('click', closeSidebar);
            sidebarOverlay.addEventListener('click', closeSidebar);

            // Sidebar dropdown functionality
            const dropdownButtons = document.querySelectorAll('.sidebar-dropdown');
            dropdownButtons.forEach(button => {
                button.addEventListener('click', function() {
                    this.classList.toggle('collapsed');
                    const targetId = this.getAttribute('data-bs-target');
                    const target = document.querySelector(targetId);
                    if (target) {
                        target.classList.toggle('show');
                    }
                });
            });
        });

        // Theme toggle functionality
        let isDarkMode = localStorage.getItem('darkMode') === 'true';

        function toggleTheme() {
            isDarkMode = !isDarkMode;
            localStorage.setItem('darkMode', isDarkMode);
            updateTheme();
        }

        function updateTheme() {
            const themeText = document.getElementById('themeText');
            const themeTextNav = document.getElementById('themeTextNav');

            if (isDarkMode) {
                document.body.classList.add('dark-mode');
                if (themeText) themeText.textContent = 'Light Mode';
                if (themeTextNav) themeTextNav.textContent = 'Light';
            } else {
                document.body.classList.remove('dark-mode');
                if (themeText) themeText.textContent = 'Dark Mode';
                if (themeTextNav) themeTextNav.textContent = 'Dark';
            }
        }

        // Language toggle functionality
        let isVietnamese = localStorage.getItem('language') === 'vi';

        function toggleLanguage() {
            isVietnamese = !isVietnamese;
            localStorage.setItem('language', isVietnamese ? 'vi' : 'en');
            updateLanguage();
        }

        function updateLanguage() {
            const langText = document.getElementById('langText');
            const langTextNav = document.getElementById('langTextNav');

            if (isVietnamese) {
                if (langText) langText.textContent = 'English';
                if (langTextNav) langTextNav.textContent = 'EN';
            } else {
                if (langText) langText.textContent = 'Vietnamese';
                if (langTextNav) langTextNav.textContent = 'VI';
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateTheme();
            updateLanguage();
        });
    </script>

    @yield('scripts')
</body>

</html>